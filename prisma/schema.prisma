generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Employee {
  id          Int       @id @default(autoincrement())
  first_name  String    @db.VarChar(45)
  last_name   String    @db.VarChar(45)
  email       String    @db.VarChar(45)
  phone       String    @db.VarChar(45)
  city        String    @db.VarChar(45)
  birthday    DateTime  @db.Date
  position    Int
  join_date   DateTime  @db.Date
  project     Int?
  created_at  DateTime? @default(now()) @db.Timestamp(0)
  modified_at DateTime? @default(now()) @db.Timestamp(0)
  
  positionDetail Position    @relation("EmployeeToPosition", fields: [position], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "positionID")
  projectDetail  Project?    @relation(fields: [project], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "projectID")
  headOfPositions Position[] @relation("HeadToPosition")
  
  @@map("employees")
}

model Position {
  id            Int     @id
  position_name String  @db.VarChar(45)
  salary_limit  Int     @default(4000)
  headId        Int?    @map("head")
  
  head  Employee?  @relation("HeadToPosition", fields: [headId], references: [id])
  employees     Employee[] @relation("EmployeeToPosition")
  
  @@map("positions")
}


model Project {
  id             Int       @id @default(autoincrement())
  name           String?   @db.VarChar(45)
  contact_person String    @db.VarChar(45)
  contact_email  String    @db.VarChar(45)
  is_active      Boolean?  @default(true)
  employees      Employee[]

  @@map("projects")
}
